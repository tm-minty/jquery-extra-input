(function(e){if(typeof e=="undefined")return!1;e.fn.caret=function(t){if(/iPad|iPhone/.test(navigator.platform))return this;var n={},r={pos:function(){var t=Array.prototype.slice.call(arguments);if(t.length>0){this.focus();if(this.createTextRange){var n=this.createTextRange();n.move("character",t[0]),n.select()}else this.setSelectionRange&&this.setSelectionRange(t[0],t[0]);return e(this)}if(document.selection){this.focus();var n=document.selection.createRange();return n.moveStart("character",-this.value.length),n.text.length}return this.selectionStart||this.selectionStart=="0"?this.selectionStart:0}};if(typeof t=="string"){var i=Array.prototype.slice.call(arguments);if(r[t]){i.splice(0,1);if(this.length&&this.length>1){var s=[];return this.each(function(){s.push(r[t].apply(this,i))}),s}return r[t].apply(this[0],i)}return this}return this}})(jQuery),function(e){e.fn.group=function(t){if(/iPad|iPhone/.test(navigator.platform))return this;var n={},r={keyup:function(t){var n=t.keyCode,r=e(this).val().length,i=e(this).attr("maxlength")-0,s=e(this).data("group").next,o=e(this).data("group").previous,u=e(this).caret("pos");return n==37&&u==0&&o?o.caret("pos",o.val().length):n==39&&u==r&&s?s.caret("pos",0):u==i&&s?s.caret("pos",s.val().length):n==8&&u==0&&o&&o.caret("pos",o.val().length),!0},getValue:function(){var t=[],n=[];for(var r=0,s=i.length;r<s;r++){var o=e(i[r]);t.push(o.val()),n.push(o.attr("maxlength")-0)}return{value:t,len:n}},setValue:function(t){for(var n=0,r=i.length;n<r;n++){var s=e(i[n]);s.val(t[n])}return!0},paste:function(t,n,s){var o=t.split(""),u=r.getValue(),a=[0,0];for(var f=n,l=u.value.length;f<l;f++){var c=u.value[f],h=f==n?s:0,p=c.substr(h);a=[f,0],o=o.concat(p.split("")),u.value[f]=u.value[f].replace(p,"");for(var d=u.len[f]-h;d--;)u.value[f]+=o.splice(0,1).join(""),o.length>0&&a[1]++}return r.setValue(u.value),e(i[a[0]]).caret("pos",a[1]-1),!0}},i=this;for(var s=0,o=i.length;s<o;s++){var u=e(i[s]);u.data("group",{index:s,name:u.attr("data-group"),next:s+1==o?null:e(i[s+1]),previous:s-1>=0?e(i[s-1]):null})}return this.bind("keyup keypress",r.keyup).bind("group-afterpaste",function(t){var n=e("#group-clipboard-data"),i=n.val();n.remove(),r.paste(i,e(this).data("group").index,e(this).caret("pos")),this.focus()}).bind("paste",function(t){var n=e('<input type="text" id="group-clipboard-data"/>').css({position:"absolute",left:"-9999999px"}),r=e(this);e(document.body).append(n),n[0].focus(),setTimeout(function(){r.trigger("group-afterpaste")},0)}),this}}(jQuery),function(e){e.fn.mask=function(t){var n={"#":/[0-9]/,$:/[a-zA-Zа-яА-Я]/},r={placeholder:"_",mask:"+7 (###) ###-##-##"},i={parseMask:function(e){e=e.split("");for(var t=e.length;t--;)e[t]in n&&(e[t]=n[e[t]]);return e},keypress:function(t,n,r){var s=e(this).val().split(""),o=String.fromCharCode(t);if(n>=r.length)return!1;typeof r[n]!="undefined"&&typeof r[n]!="string"&&r[n].test(o)?(s[n]=o,e(this).val(s.join("")).caret("pos",n+1)):i.keypress.call(this,t,n+1,r)},move:function(e,t,n){return n>=0&&n<t.length?typeof t[n+e]!="undefined"&&typeof t[n+e]!="string"?n:i.move(e,t,n+e):n},getClearValue:function(e,t,n){var r=[];for(var i=0,s=e.length;i<s;i++)typeof e[i]=="object"&&t[i]!=n&&r.push(t[i]);return r},fill:function(e,t,n){var r=[],i=0;for(var s=0,o=e.length;s<o;s++)if(typeof e[s]=="object"){if(typeof t[i]!="undefined"){var u=!0;while(u)e[s].test(t[i])?(r.push(t[i]),u=!1):i<=e.length?i++:u=!1}else r.push(n);i++}else r.push(e[s]);return r.join("")}};return typeof t=="string"&&typeof i[t]=="function"?i[t].apply(this,Array.prototype.splice.call(arguments,1,arguments.length)):this.each(function(){var n={placeholder:e(this).attr("data-mask-placeholder"),mask:e(this).attr("data-mask")},s=e.extend(r,t);s=e.extend(s,n);var o=i.parseMask(s.mask),u="",a=e(this).val();if(a==i.fill(o,i.getClearValue(o,a,s.placeholder),s.placeholder))u=a;else if(a.length>0)u=i.fill(o,a,s.placeholder);else for(var f=0,l=o.length;f<l;f++)u+=typeof o[f]=="string"?o[f]:s.placeholder;e(this).attr("maxlength",u.length).val(u),e(this).bind("keypress",function(t){t.keyCode==0&&(t.keyCode=t.charCode);if(t.keyCode>=48&&t.keyCode<=57||t.keyCode>=96&&t.keyCode<=105||t.keyCode>=65&&t.keyCode<=90||t.keyCode>=186&&t.keyCode<=222){var n=e(this).caret("pos");i.keypress.call(this,t.charCode,n,o)}}).bind("keydown",function(t){var n=e(this).val().split(""),r=e(this).caret("pos");if(t.keyCode==39)e(this).caret("pos",i.move(1,o,r));else if(t.keyCode==37)e(this).caret("pos",i.move(-1,o,r));else{if(t.keyCode==8){var u=i.move(-1,o,r)-1;return typeof o[u]=="object"&&(n[u]!=s.placeholder&&(n[u]=s.placeholder,e(this).val(n.join(""))),e(this).caret("pos",u)),!1}if(t.keyCode==46)return typeof []&&(n[r]=s.placeholder),e(this).val(i.fill(o,i.getClearValue(o,n,s.placeholder),s.placeholder)).caret("pos",r),!1}return!0}).bind("mask-afterpaste afterpaste",function(t){var n=e("#mask-clipboard-data"),r=n.val().split(""),s=e(this).caret("pos");n.remove();for(var u=0,a=r.length;u<a;u++)i.keypress.call(this,r[u].charCodeAt(0),s,o),s=e(this).caret("pos");this.focus()}).bind("paste beforepaste",function(t){var n=t.clipboardData&&t.clipboardData.getData?t.clipboardData.getData("text/plain"):window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):!1,r=e('<input type="text" id="mask-clipboard-data"/>').css({position:"absolute",left:"-999999px"}),i=e(this);return e(document.body).append(r),r.focus(),setTimeout(function(){i.trigger("mask-afterpaste")},0),!0})})}}(jQuery);